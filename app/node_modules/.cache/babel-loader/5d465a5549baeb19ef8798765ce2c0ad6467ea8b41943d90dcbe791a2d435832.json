{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{useParams}from\"react-router\";import\"./PostItem.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL_POSTS||\"http://localhost:5000/api/posts\";const PostItem=_ref=>{let{post,onPostDeleted}=_ref;const storedData=localStorage.getItem(\"user\");const parsedData=JSON.parse(storedData);const{email,name,token,_id}=parsedData;const[posts,setPosts]=useState();const{bookId}=useParams();const deletePost=async(postId,token)=>{try{const config={headers:{Authorization:\"Bearer \".concat(token)}};console.log(token);const response=await axios.delete(\"\".concat(API_URL,\"/\").concat(postId),config);const posts=response.data;setPosts(posts);//   console.log(\"posts fetched from server: \", posts);\nconsole.log(response);onPostDeleted();}catch(error){const message=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();console.log(message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"div\",{children:new Date(post.createdAt).toLocaleString(\"en-IN\")}),/*#__PURE__*/_jsxs(\"h2\",{children:[post.name,\" : \\\"\",post.text,\"\\\"\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deletePost(post._id,token),className:\"close\",children:\"X\"})]});};export default PostItem;","map":{"version":3,"names":["React","useState","axios","useParams","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL_POSTS","PostItem","_ref","post","onPostDeleted","storedData","localStorage","getItem","parsedData","JSON","parse","email","name","token","_id","posts","setPosts","bookId","deletePost","postId","config","headers","Authorization","concat","console","log","response","delete","data","error","message","toString","className","children","Date","createdAt","toLocaleString","text","onClick"],"sources":["C:/Users/marju/OneDrive/Desktop/Capstone_Project/GoogleBooks/bookshelf/app/src/components/PostItem.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router\";\r\nimport \"./PostItem.css\";\r\nconst API_URL =\r\n  process.env.REACT_APP_API_URL_POSTS || \"http://localhost:5000/api/posts\";\r\n\r\nconst PostItem = ({ post, onPostDeleted }) => {\r\n  const storedData = localStorage.getItem(\"user\");\r\n  const parsedData = JSON.parse(storedData);\r\n  const { email, name, token, _id } = parsedData;\r\n  const [posts, setPosts] = useState();\r\n  const { bookId } = useParams();\r\n  const deletePost = async (postId, token) => {\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      };\r\n      console.log(token);\r\n      const response = await axios.delete(`${API_URL}/${postId}`, config);\r\n      const posts = response.data;\r\n      setPosts(posts);\r\n      //   console.log(\"posts fetched from server: \", posts);\r\n      console.log(response);\r\n\r\n      onPostDeleted();\r\n    } catch (error) {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n      console.log(message);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"post\">\r\n      <div>{new Date(post.createdAt).toLocaleString(\"en-IN\")}</div>\r\n      <h2>\r\n        {post.name} : \"{post.text}\"\r\n      </h2>\r\n      <button onClick={() => deletePost(post._id, token)} className=\"close\">\r\n        X\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostItem;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,cAAc,CACxC,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACxB,KAAM,CAAAC,OAAO,CACXC,OAAO,CAACC,GAAG,CAACC,uBAAuB,EAAI,iCAAiC,CAE1E,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAA6B,IAA5B,CAAEC,IAAI,CAAEC,aAAc,CAAC,CAAAF,IAAA,CACvC,KAAM,CAAAG,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,KAAM,CAAAC,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,CACzC,KAAM,CAAEM,KAAK,CAAEC,IAAI,CAAEC,KAAK,CAAEC,GAAI,CAAC,CAAGN,UAAU,CAC9C,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,QAAQ,CAAC,CAAC,CACpC,KAAM,CAAE2B,MAAO,CAAC,CAAGzB,SAAS,CAAC,CAAC,CAC9B,KAAM,CAAA0B,UAAU,CAAG,KAAAA,CAAOC,MAAM,CAAEN,KAAK,GAAK,CAC1C,GAAI,CACF,KAAM,CAAAO,MAAM,CAAG,CACbC,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYV,KAAK,CAChC,CACF,CAAC,CACDW,OAAO,CAACC,GAAG,CAACZ,KAAK,CAAC,CAClB,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAAnC,KAAK,CAACoC,MAAM,IAAAJ,MAAA,CAAI1B,OAAO,MAAA0B,MAAA,CAAIJ,MAAM,EAAIC,MAAM,CAAC,CACnE,KAAM,CAAAL,KAAK,CAAGW,QAAQ,CAACE,IAAI,CAC3BZ,QAAQ,CAACD,KAAK,CAAC,CACf;AACAS,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC,CAErBtB,aAAa,CAAC,CAAC,CACjB,CAAE,MAAOyB,KAAK,CAAE,CACd,KAAM,CAAAC,OAAO,CACVD,KAAK,CAACH,QAAQ,EACbG,KAAK,CAACH,QAAQ,CAACE,IAAI,EACnBC,KAAK,CAACH,QAAQ,CAACE,IAAI,CAACE,OAAO,EAC7BD,KAAK,CAACC,OAAO,EACbD,KAAK,CAACE,QAAQ,CAAC,CAAC,CAClBP,OAAO,CAACC,GAAG,CAACK,OAAO,CAAC,CACtB,CACF,CAAC,CACD,mBACElC,KAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBvC,IAAA,QAAAuC,QAAA,CAAM,GAAI,CAAAC,IAAI,CAAC/B,IAAI,CAACgC,SAAS,CAAC,CAACC,cAAc,CAAC,OAAO,CAAC,CAAM,CAAC,cAC7DxC,KAAA,OAAAqC,QAAA,EACG9B,IAAI,CAACS,IAAI,CAAC,OAAI,CAACT,IAAI,CAACkC,IAAI,CAAC,IAC5B,EAAI,CAAC,cACL3C,IAAA,WAAQ4C,OAAO,CAAEA,CAAA,GAAMpB,UAAU,CAACf,IAAI,CAACW,GAAG,CAAED,KAAK,CAAE,CAACmB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,GAEtE,CAAQ,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}