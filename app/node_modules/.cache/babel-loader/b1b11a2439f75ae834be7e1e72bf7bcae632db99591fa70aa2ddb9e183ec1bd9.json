{"ast":null,"code":"import React,{useState}from\"react\";// import useAuth from \"../hooks/useAuth\";\nimport axios from\"axios\";import{useParams}from\"react-router-dom\";import\"./PostForm.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=\"http://localhost:5000/api/posts\";const PostForm=_ref=>{let{onPostCreated}=_ref;const[text,setText]=useState(\"\");const storedData=localStorage.getItem(\"user\");const parsedData=JSON.parse(storedData);let{email,name,token,_id}=parsedData;const{bookId}=useParams();const createPost=async(text,token)=>{const postData={bookId:bookId,text:text,user:_id,name:name};try{const config={headers:{Authorization:\"Bearer \".concat(token)}};const response=await axios.post(API_URL,postData,config);console.log(\"post created: \",response);if(onPostCreated){onPostCreated();}}catch(error){const message=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();console.log(message);}};const onSubmit=e=>{e.preventDefault();createPost(text,token);};return/*#__PURE__*/_jsx(\"section\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",children:\"Add your thoughts on this book\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"text\",id:\"text\",autoFocus:true,value:text,onChange:e=>setText(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-block\",type:\"submit\",children:\"Add Post\"})})]})});};export default PostForm;","map":{"version":3,"names":["React","useState","axios","useParams","jsx","_jsx","jsxs","_jsxs","API_URL","PostForm","_ref","onPostCreated","text","setText","storedData","localStorage","getItem","parsedData","JSON","parse","email","name","token","_id","bookId","createPost","postData","user","config","headers","Authorization","concat","response","post","console","log","error","message","data","toString","onSubmit","e","preventDefault","className","children","htmlFor","type","id","autoFocus","value","onChange","target"],"sources":["C:/Users/marju/OneDrive/Desktop/Capstone_Project/GoogleBooks/bookshelf/app/src/components/PostForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n// import useAuth from \"../hooks/useAuth\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport \"./PostForm.css\";\r\nconst API_URL = \"http://localhost:5000/api/posts\";\r\n\r\nconst PostForm = ({ onPostCreated }) => {\r\n  const [text, setText] = useState(\"\");\r\n  const storedData = localStorage.getItem(\"user\");\r\n  const parsedData = JSON.parse(storedData);\r\n  let { email, name, token, _id } = parsedData;\r\n  const { bookId } = useParams();\r\n  const createPost = async (text, token) => {\r\n    const postData = {\r\n      bookId: bookId,\r\n      text: text,\r\n      user: _id,\r\n      name: name,\r\n    };\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      };\r\n      const response = await axios.post(API_URL, postData, config);\r\n      console.log(\"post created: \", response);\r\n      if (onPostCreated) {\r\n        onPostCreated();\r\n      }\r\n    } catch (error) {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n      console.log(message);\r\n    }\r\n  };\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    createPost(text, token);\r\n  };\r\n  return (\r\n    <section className=\"form\">\r\n      <form onSubmit={onSubmit}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"text\">Add your thoughts on this book</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"text\"\r\n            id=\"text\"\r\n            autoFocus\r\n            value={text}\r\n            onChange={(e) => setText(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <button className=\"btn btn-block\" type=\"submit\">\r\n            Add Post\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default PostForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}