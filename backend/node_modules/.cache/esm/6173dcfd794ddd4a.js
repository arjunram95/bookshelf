let express,connectToDb,join,home,userRoutes,postRoutes,errorHandler;_794‍.w("express",[["default",["express"],function(v){express=v}]]);_794‍.w("./db",[["default",["connectToDb"],function(v){connectToDb=v}]]);_794‍.w("path",[["join",["join"],function(v){join=v}]]);_794‍.w("./routes/home",[["default",["home"],function(v){home=v}]]);_794‍.w("./routes/userRoutes",[["default",["userRoutes"],function(v){userRoutes=v}]]);_794‍.w("./routes/postRoutes",[["default",["postRoutes"],function(v){postRoutes=v}]]);_794‍.w("./middleware/errorMiddleware",[["errorHandler",["errorHandler"],function(v){errorHandler=v}]]);
// import cors from "cors";






// require("dotenv").config();

const app = express();
app.use(
  cors({
    origin: "*",
  })
);
app.use(express.json());
app.use(express.urlencoded({ extended: false }));
// app.use(express.static(path.join(__dirname, "../app/build")));
app.use(express.static(join(__dirname, "build")));
app.use("/api/users", userRoutes);
app.use("/api/posts", postRoutes);
app.use("/", home);
// app.use("/api/users");
app.use(errorHandler);

//serve frontend
if (process.env.NODE_ENV) {
  app.get("*", (req, res) => {
    res.sendFile(join(__dirname, "build", "index.html"));
  });
} else {
  app.get("/*", (req, res) => res.send("Please set to production"));
}
Promise.all([connectToDb()]).then(() =>
  app.listen(5000, () => console.log(`Server started on port 5000`))
);
